ICONS_STEP = {
    '–®–∞–≥ 1': '1Ô∏è‚É£',
    '–®–∞–≥ 2': '2Ô∏è‚É£',
    '–®–∞–≥ 3': '3Ô∏è‚É£',
    '–®–∞–≥ 4': '4Ô∏è‚É£',
    '–®–∞–≥ 5': '5Ô∏è‚É£',
    '–®–∞–≥ 6': '6Ô∏è‚É£',
    '–®–∞–≥ 7': '7Ô∏è‚É£',
    '–®–∞–≥ 8': '8Ô∏è‚É£',
    '–®–∞–≥ 9': '9Ô∏è‚É£',
    '–®–∞–≥ 10': '1Ô∏è‚É£0Ô∏è‚É£',
    '–®–∞–≥ 11': '1Ô∏è‚É£1Ô∏è‚É£',
    '–®–∞–≥ 12': '1Ô∏è‚É£2Ô∏è‚É£',
    '–®–∞–≥ 13': '1Ô∏è‚É£3Ô∏è‚É£',
    '–®–∞–≥ 14': '1Ô∏è‚É£4Ô∏è‚É£',
    '–®–∞–≥ 15': '1Ô∏è‚É£5Ô∏è‚É£',
    '–®–∞–≥ 16': '1Ô∏è‚É£6Ô∏è‚É£',
    '–®–∞–≥ 17': '1Ô∏è‚É£7Ô∏è‚É£',
    '–®–∞–≥ 18': '1Ô∏è‚É£8Ô∏è‚É£',
    '–®–∞–≥ 19': '1Ô∏è‚É£9Ô∏è‚É£',
    '–®–∞–≥ 20': '2Ô∏è‚É£0Ô∏è‚É£',
}

ICONS_CAT = {'deserty': 'üßÅ',
             'vtorye-bliuda': 'üç≥',
             'pervye-bliuda': 'üç≤',
             'garniry': 'üçö',
             'vipechka': 'ü•ß',
             'salaty': 'ü•ó'}


def create_recept_message(row_recept:dict) -> str:
    """–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞"""
    msg = f'{ICONS_CAT.get(row_recept.get('category'))}\t<b>{row_recept.get('title')}</b>\n\n'
    if row_recept.get('count'):
        msg = f"{msg}–ò–∑ —Ä–∞—Å—á–µ—Ç–∞ {row_recept.get('count').get('count')} {row_recept.get('count').get('title').lower()}\n"
    ingredients:dict = row_recept.get('ingredients')
    for lvl, value in ingredients.items():
        msg = f'{msg}<u>{lvl}</u>\n'
        for name, counts in value.items():
            weight = f'{str(counts.get('value',''))} {counts.get('type', '')}'
            weight = f"{weight} ({counts.get('text', '')})" if not counts.get('text', '') in weight else weight
            msg = f'{msg}‚úÖ {name}\t{weight}\n'
    m = row_recept.get('steps')

    steps = [f'{ICONS_STEP.get(f'–®–∞–≥ {w.split('\n',1)[0].strip()}', '')}  {w.split('\n',1)[1].strip()}' for w in row_recept.get('steps').split('–®–∞–≥ ') if w]
    steps_all = steps[:-1]
    steps_all.extend([s for s in steps[-1].split('\n') if s])

    return msg, steps_all

if __name__ == '__main__':
    
    row_recept = {'id': 13849, 'img': 'https://cdn.food.ru/unsigned/fit/640/480/ce/0/czM6Ly9tZWRpYS9waWN0dXJlcy9yZWNpcGVzLzg1NDMzL2NvdmVycy80M1VhUVQuanBlZw.jpg', 
                  'description': '–°–æ–ª—è–Ω–∫–∞ ‚Äî —ç—Ç–æ –±–ª—é–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–æ—Ä–∏–ª–æ —Å–µ—Ä–¥—Ü–∞ –º–Ω–æ–≥–∏—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ö–æ–∑—è–µ–∫. –û—Ç–ª–∏—á–∞–µ—Ç —ç—Ç–æ—Ç —Å—É–ø –æ—Ç –¥—Ä—É–≥–∏—Ö –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—è—Å–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π –≤ –±—É–ª—å–æ–Ω–µ. –ù–æ –¥–∞–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –≤–æ–æ–±—â–µ –Ω–µ –ø–æ—Ö–æ–∂ –Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫—É—é —Å–æ–ª—è–Ω–∫—É. –í —Å–æ—Å—Ç–∞–≤ –±–ª—é–¥–∞ –≤—Ö–æ–¥–∏—Ç —Ñ–∏–ª–µ —Ä—ã–±—ã, –∫–∞–ø–µ—Ä—Å—ã, —Å–æ–ª–µ–Ω—ã–µ –æ–≥—É—Ä—Ü—ã, –ø–∞—Å—Ç–µ—Ä–Ω–∞–∫ –∏ –æ–ª–∏–≤–∫–∏. –ò –Ω–µ —Å–º–æ—Ç—Ä—é –Ω–∞ —Ç–æ, —á—Ç–æ —ç—Ç–æ –¥–∞–ª–µ–∫–æ –Ω–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å–æ–ª—è–Ω–∫–∞, –±–ª—é–¥–æ –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è –≤—Å–µ–º –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.', 
                  'title': '–ü–∏–∫–∞–Ω—Ç–Ω–∞—è —Å–æ–ª—è–Ω–∫–∞ —Å —Ä—ã–±–æ–π', 
                  'steps': '–®–∞–≥ 1\n–ù–∞–∫—Ä–æ—à–∏—Ç–µ –º–µ–ª–∫–æ –ª—É–∫, –º–æ—Ä–∫–æ–≤—å, –ø–∞—Å—Ç–µ—Ä–Ω–∞–∫. –í –∫–∞—Å—Ç—Ä—é–ª—é —Å —Ç–æ–ª—Å—Ç—ã–º –¥–Ω–æ–º –Ω–∞–ª–µ–π—Ç–µ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ –º–∞—Å–ª–æ, –≤—ã–ª–æ–∂–∏—Ç–µ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–π –ª—É–∫, —Ç—É—à–∏—Ç–µ –¥–≤–µ-—Ç—Ä–∏ –º–∏–Ω—É—Ç—ã. –í —Å–ª–µ–¥ –∑–∞ –ª—É–∫–æ–º –¥–æ–±–∞–≤—å—Ç–µ –º–æ—Ä–∫–æ–≤—å –∏ –ø–∞—Å—Ç–µ—Ä–Ω–∞–∫, —Ç—É—à–∏—Ç–µ 10 –º–∏–Ω—É—Ç.\n–®–∞–≥ 12\n–ó–∞—Ç–µ–º –∑–∞–ª–µ–π—Ç–µ 500 –º–ª —Ä—ã–±–Ω–æ–≥–æ –±—É–ª—å–æ–Ω–∞ –∏ –≥–æ—Ç–æ–≤—å—Ç–µ –µ—â–µ 20 –º–∏–Ω—É—Ç. –ü–æ—Ç–æ–º –¥–æ–±–∞–≤—å—Ç–µ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–π –æ–≥—É—Ä–µ—Ü, –∫–∞–ø–µ—Ä—Å—ã, —Ç–æ–º–∞—Ç–Ω—É—é –ø–∞—Å—Ç—É, –ª–∞–≤—Ä–æ–≤—ã–π –ª–∏—Å—Ç –∏ –ø–µ—Ä–µ—Ü, –≥–æ—Ç–æ–≤—å—Ç–µ –µ—â –µ –º–∏–Ω—É—Ç 10.\n–®–∞–≥ 3\n–ü–æ–∫–∞ –≥–æ—Ç–æ–≤—è—Ç—Å—è –æ–≤–æ—â–∏, –Ω–∞—Ä–µ–∂—å—Ç–µ –∫—Ä–∞—Å–Ω—É—é —Ä—ã–±—É –Ω–µ–±–æ–ª—å—à–∏–º–∏ –∫—É–±–∏–∫–∞–º–∏, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–∞—Å—Ç—Ä—é–ª—é –∏ –≤–∞—Ä–∏—Ç–µ –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä—ã–±—ã, —Ç–∞–∫ —á—Ç–æ–±—ã —Ä—ã–±–∞ –Ω–µ —Ä–∞–∑–≤–∞—Ä–∏–ª–∞—Å—å.\n\n–ü–æ–¥–∞–≤–∞–π—Ç–µ —Å–æ–ª—è–Ω–∫—É —Ä–∞–∑–ª–∏–≤ –≤ –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–µ —Ç–∞—Ä–µ–ª–∫–∏. –£–∫—Ä–∞—Å—å—Ç–µ –∑–µ–ª–µ–Ω—å—é –ø–µ—Ç—Ä—É—à–∫–∏, –±–∞–∑–∏–ª–∏–∫–∞, —É–∫—Ä–æ–ø–∞, –æ–ª–∏–≤–∫–∞–º–∏ –∏ –º–∞—Å–ª–∏–Ω–∞–º–∏. –ü–æ–¥–∞–π—Ç–µ –∫ –±—É–ª—å–æ–Ω—É —Å—É—Ö–∞—Ä–∏–∫–∏.', 
                  'count': {'count': 6, 'title': '–ü–æ—Ä—Ü–∏–π'}, 
                  'ingredients': {'–î–ª—è –±–ª—é–¥–∞': {'–°–º–µ—Ç–∞–Ω–∞': {'text': '4 —Å—Ç. –ª.', 'type': '–≥', 'value': 100.0}, '–°–≤–µ–∂–∞—è –∑–µ–ª–µ–Ω—å': {'text': '–ø–æ –≤–∫—É—Å—É', 'type': '–ø–æ –≤–∫—É—Å—É'}}}, 
                  'nutrients': {'fat': '7,13 –≥—Ä–∞–º–º', 'protein': '5,7 –≥—Ä–∞–º–º', 'calories': '96,42 –∫–ö–∞–ª', 'carbohydrates': '2,32 –≥—Ä–∞–º–º'}, 
                  'category': 'pervye-bliuda', 
                  'products': '–°–≤–µ–∂–∞—è –∑–µ–ª–µ–Ω—å,–°–º–µ—Ç–∞–Ω–∞'}

    print(create_recept_message(row_recept))